{% extends "_layout.html" %}
<!doctype html>
<html lang="en">
{%block content%}

<div id="chartContainer" style="height: 300px; width: 85%;"></div>

<button class="button button1" style="font-size:16px;" id="exportChart">Export Chart</button>

 <div id="chartLoc" style="height: 300px; width: 85%;"></div>
 <button class="button button1" style="font-size:16px;" id="exportChartLoc">Export Chart</button>
 
 <div id="chartRatio" style="height: 300px; width: 85%;"></div>
 <button class="button button1" style="font-size:16px;" id="exportChartRatio">Export Chart</button>
 
 <h1 style="font: bold">Marketplace </h1>  

    <div class="inline">
<div id="chart_vente" style="height: 300px; width: 100%;"></div>
<div id="chart_loc" style="height: 300px; width: 100%;"></div>
<div id="chart_mark" style="height: 300px; width: 100%;"></div>
    </div>    
      <br><br>  <br><br> <br><br> <br>
      </div>
        <button class="button button1" style="font-size:30px;"><a href={{ url_for('next',id=2) }}>Next extraction</a></button>
     

    <!-- Graphs -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js'></script>   
    
 <script>

      

</script>


<script type="text/javascript">
window.onload = function () {
	var chart = new CanvasJS.Chart("chartContainer", {
		theme: "theme3",
		title:{
			text: "Prix par m2 en Vente"              
		},
   // axisY: { maximum: 40000 },

		data: [              
		{
			type: "column",
      cursor:"pointer",
      click: onClick, 
			dataPoints:[
            {% for d in data_points %} 
                { label:"{{d.label}}",  y: {{d.y}},href: "{{d.url}}" },
            {%endfor%}
            ]

		}
		]
	});
  
	chart.render();
  function onClick(e){
     	console.log(e.dataPoint.href) 
        window.open(e.dataPoint.href,'_blank');  
};
 	document.getElementById("exportChart").addEventListener("click",function(){
    	chart.exportChart({format: "jpg"});
    });  
//************************************************************************
//ATLA3 ILFOU9
var chart = new CanvasJS.Chart("chart_vente", {
	animationEnabled: true,
	title: {
		text: "Vente"
	},
  /*height:260,
  width:200,*/
	data: [{
		type: "pie",
		startAngle: 40,
		yValueFormatString: "##0.00\"%\"",
		indexLabel: "{label} {y}",
		dataPoints: [
        {% for d in data_points_mark_vente %} 
            { label:"{{d.label}}",  y: {{d.y}} },
        {%endfor%}
		]
	}]
});
chart.render();


//*********************************************************************************
var chart = new CanvasJS.Chart("chart_loc", {
	animationEnabled: true,
	title: {
		text: "Location"
	},
	data: [{
		type: "pie",
		startAngle: 240,
		yValueFormatString: "##0.00\"%\"",
		indexLabel: "{label} {y}",
		dataPoints: [
        {% for d in data_points_mark_loc %} 
            { label:"{{d.label}}",  y: {{d.y}} },
        {%endfor%}
		]
	}]
});
chart.render();

//***********************************************************************
var chart = new CanvasJS.Chart("chart_mark", {
	animationEnabled: true,
	title: {
		text: "Both"
	},

	data: [{
		type: "pie",
		startAngle: 240,
		yValueFormatString: "##0.00\"%\"",
		indexLabel: "{label} {y}",
		dataPoints: [
        {% for d in data_points_mark_all %} 
            { label:"{{d.label}}",  y: {{d.y}} },
        {%endfor%}
		]
	}]
});
chart.render();
//****************************************************************************
   	var chart_loc = new CanvasJS.Chart("chartLoc", {
		theme: "theme8",
		title:{
			text: "Prix par m2 en Loc "              
		},
    axisY: { },
    axisX:{
      interval: 1,
      labelAngle: -70 
     },
		data: [              
		{
			type: "column",
			dataPoints:[
            {% for d in data_points_loc %} 
                { label:"{{d.label}}",  y: {{d.y}} },
            {%endfor%}
            ]

		}
		]
	});
  
	chart_loc.render();
 	document.getElementById("exportChartLoc").addEventListener("click",function(){
    	chart.exportChart({format: "jpg"});
    }); 

    	var chart_loc = new CanvasJS.Chart("chartRatio", {
		theme: "theme8",
		title:{
			text: "Prix par m2 en Ratio"              
		},
		data: [              
		{
			type: "column",
			dataPoints:[
            {% for d in data_points_ratio %} 
                { label:"{{d.label}}",  y: {{d.y}} },
            {%endfor%}
            ]

		}
		]
	});
  
	chart_loc.render();
 	document.getElementById("exportChartRatio").addEventListener("click",function(){
    	chart.exportChart({format: "jpg"});
    }); 

}
</script>
  <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>



 <br>
 <br>
 
 <br>
 <br>

{%endblock%}